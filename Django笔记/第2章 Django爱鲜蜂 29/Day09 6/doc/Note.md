# Day09





### 用户激活，认证

- 途径
  - 邮件
  - 短信
  - 人工审核
- 邮件
  - 发送邮件
    - 收件人地址
    - 发件人的信息
      - 用户名
      - 密码
      - 服务器
        - 邮件服务器
        - 端口
      - 内容
  - 点击邮件中的链接就可以激活
    - 链接中存在用户的唯一标识
      - http://xxxxx/activate/?u_token=YYYY
      - u_token 缓存中 作为key， value -> user_id
      - u_token - > uuid
    - 标识存在过期时间
    - 标识存在使用次数限制



### 错误信息

- 先将错误信息存储下来
- 在错误显示页面获取错误信息
  - 保证错误信息只能出现一次
  - 获取到数据之后，直接将自己删除



### 购物车

- 购物多对多的关系
  - 用户
  - 商品
- 订单
  - 订单和已购买商品是一对多的关系
  - 表关系
    - 订单表
      - 属于哪个用户
    - 订单商品表
      - 购车物里
    - 地址
      - 每个订单对应一个地址
      - 一个地址可以对应多个订单
      - 订单会级联收货地址表
    - 优惠卷
- 添加购物车
  - 需要用户
    - 如果用户未登录，直接跳转登陆
  - 需要商品
    - 传递商品唯一标识
  - 添加的合法性
    - 此数据不存在，创建购物车数据
    - 如果此数据存在，直接将数量加一



### 小技能

- js获取jquery对象属性
  - attr
    - 可以获取任意属性
  - prop
    - 只能获取内置属性



### 浏览器行为

- 重定向
- 跨域



### 项目中多块逻辑拥有相同操作

- 封装一个函数
- 装饰器
- 中间件